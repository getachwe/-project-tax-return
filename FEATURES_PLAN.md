### תוכנית פיצ'רים ומשימות לביצוע

## 1. קליטת נתונים (Import & OCR)

1.1 הוספת קדם־עיבוד לתמונות (binarize, deskew, sharpen)
1.2 פרמטר DPI דינמי ל־OCR (ניסוי 120/150/180)
1.3 ריבוי מנועי OCR (tesseract.js + ספק חיצוני אופציונלי)
1.4 ניהול כשלים: ריטריים והפחתת איכות/צפיפות חכמה
1.5 יבוא קבצי CSV של תלושי שכר (מיפוי עמודות לשדות)
1.6 יבוא Excel (xlsx) ותמיכה בגיליונות מרובים
1.7 יבוא JSON (תבנית סכמטית מתועדת)
1.8 זיהוי שנת מס מתוך המסמך (regex + אימות טווח)
1.9 זיהוי אוטומטי של תבנית טופס 106 לפי מילות מפתח

## 2. טפסים ו־UX

2.1 אשף זרימה עם מד־התקדמות (Stepper)
2.2 שמירה אוטומטית מקומית (localStorage) לטיוטה
2.3 טולטיפים ממוקדים בלבד לשדות נבחרים
2.4 אימותים בזמן אמת והודעות שגיאה בהירות
2.5 הצעות השלמה חכמות (autocomplete) לפי הקשר
2.6 נגישות מלאה (ARIA roles, תוויות, פוקוס)
2.7 רכיבי UI של ShadCN/UI + Tailwind לכל הטפסים
2.8 Toasts לפידבק מהיר (הצלחה/שגיאה)

## 3. חישובים ותובנות

3.1 טבלת מדרגות מס פר־שנה ותחזוקה נוחה
3.2 סימולציות “מה אם” והשוואת תרחישים זה לצד זה
3.3 חישוב הטבות פריפריה לפי ישוב (טבלת יישובים)
3.4 ניתוח רגישות: השפעת שינוי בשדות מרכזיים
3.5 בדיקת עקביות: סתירות בין שדות (e.g., תאריכים)

## 4. דוחות וייצוא

4.1 תבנית PDF מעוצבת RTL (גרסה מפורטת)
4.2 תבנית “תקציר מנהלים” קצרה
4.3 גרפים בטבלאות הדוח (טורפים/עמודות)
4.4 ייצוא CSV/Excel לנתוני כניסה ותוצאות
4.5 שיתוף לינק מאובטח לקריאה בלבד (tokenized)

## 5. ניהול משתמשים ונתונים

5.1 הרשמה/התחברות (JWT) ושחזור סיסמה
5.2 פרופיל משתמש והיסטוריית חישובים
5.3 הרשאות: משתמש, רו"ח, אדמין
5.4 שיתוף תיק חישוב בין משתמשים ספציפיים
5.5 הצפנה במנוחה (DB) ותעבורה (HTTPS)
5.6 מחיקה והורדה עצמית של נתונים (GDPR)

## 6. Backend ותשתיות

6.1 תור עיבוד לקבצים גדולים (BullMQ/Redis)
6.2 אחסון קבצים זמני (S3/דיסק) עם ניקוי מתוזמן
6.3 Rate limiting ו־request size limits
6.4 Audit trail לפעולות (upload, calculate, export)
6.5 גרסאות API וכיסוי שגיאות עקבי

## 7. איכות, ניטור ואוטומציה

7.1 טסטי יחידה לחישובי מס (Jest)
7.2 טסטי אינטגרציה ל־API (Supertest)
7.3 E2E למסע משתמש (Playwright)
7.4 CI/CD (GitHub Actions): לינט, טסטים, בנייה, דיפלוי
7.5 לוגים מובנים (Winston) ורמות לוג
7.6 ניטור ובקרת ביצועים (OpenTelemetry)
7.7 התראות שגיאות (Sentry)

## 8. אינטגרציות

8.1 שליחת דוחות במייל עם תבנית HTML
8.2 תשלום עבור דוחות/ייעוץ (Stripe)
8.3 Webhooks ל־CRM/ERP של רו"ח

## 9. בינלאומיות ותוכן

9.1 i18n: עברית/אנגלית (react-i18next)
9.2 פורמט מספרים/תאריכים לפי שפה
9.3 מדריך מוטמע (onboarding) קצר
9.4 FAQ אינטראקטיבי וטולטיפים הקשריים

## 10. ביצועים ואחסון

10.1 חלוקת קוד (code splitting) וטעינה עצלה
10.2 קאשינג לתוצאות חישוב זהות
10.3 אופטימיזציית תמונות ו־gzip/brotli
10.4 אחסון נתונים בענן לפי צורך (S3/GCS)

## 11. שיפורי OCR מתקדמים

11.1 קדם־עיבוד מתקדם (remove noise, thresholding)
11.2 התאמת שפה דינמית (heb/eng) לפי זיהוי תוכן
11.3 אימות פלט OCR מול regex לשדות ספציפיים
11.4 השלמה חכמה של ערכים חסרים (heuristics)
11.5 לוג איכות OCR (אחוז ביטחון, אזורי כשל)

## 12. משפטי/רגולטורי

12.1 מסך תנאי שימוש ומדיניות פרטיות
12.2 הסכמת משתמשים לשמירת נתונים
12.3 הצפנה והפרדת נתונים בין חשבונות
12.4 דוקומנטציה לתהליכי מחיקה/בקשת מידע

## נספח – סדר עבודה מומלץ (MVP+)

A.1 שיפורי OCR בסיסיים (1.1–1.4)
A.2 UX וטולטיפים ממוקדים (2.1–2.4, 2.7–2.8)
A.3 חישובים ודיוק (3.1, 3.5)
A.4 דוחות PDF/CSV (4.1, 4.4)
A.5 טסטים ו־CI (7.1, 7.4)
